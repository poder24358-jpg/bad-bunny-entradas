<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entradas Disponibles - Bad Bunny</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="nav-listado">
        <a href="seleccion.html" class="back-btn">&#10094;</a>
        <div class="nav-info">
            <span class="artist-green">Bad Bunny</span>
            <span class="details-small">14 feb.  sab.  21:00  2026</span>
        </div>
    </nav>

    <div class="pink-banner">Sólo queda un 3% de las entradas</div>

    <section class="stadium-area">
        <div class="price-disclaimer">
            Los precios que aparecen en el mapa son aproximados y son fijados por los clientes que venden sus entradas.
        </div>
        <div class="map-container">
            <div class="photo-placeholder-stadium"><img src="images/estadio.png" alt="Mapa del Estadio"></div>
            
            <div class="bubble pink" style="top:25%; left:20%;" id="bubble1">298.812 AR$</div>
            <div class="bubble" style="top:50%; left:45%;" id="bubble2">110.050 AR$</div>
        </div>
    </section>

    <main class="listings-sheet">
        <div class="drag-handle"></div>
        <div class="sheet-header">
            <h3 class="bad-bunny-title">Bad Bunny</h3>
            <div class="sheet-filters">
                <button class="pill-green" id="cantidadPill">1 entrada</button>
            </div>
        </div>

        <div class="ticket-list">
            <div class="ticket-card" onclick="abrirDetalle('Sivori Alta', 110.050, 'Disponible')" style="cursor: pointer;">
                <div class="ticket-photo-box">
                    <img src="images/Sivori Alta.jpg" alt="Sivori Alta" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="ticket-info">
                    <p class="best-price">El mejor precio</p>
                    <h4>Sivori Alta</h4>
                    <p>Fila Sine</p>
                </div>
                <div class="ticket-price">
                    <span class="price-val" id="precio-sivori">110.050 AR$</span>
                    <span class="badge-green">Disponible</span>
                </div>
            </div>

            <div class="ticket-card" onclick="abrirDetalle('Campo Delantero', 160.000, 'Disponible')" style="cursor: pointer;">
                <div class="ticket-photo-box">
                    <img src="images/campo delantero.jpg" alt="Campo Delantero" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="ticket-info">
                    <h4>Campo Delantero</h4>
                    <p>Fila Sine</p>
                </div>
                <div class="ticket-price">
                    <span class="price-val" id="precio-delantero">160.000 AR$</span>
                    <span class="badge-green">Disponible</span>
                </div>
            </div>

            <div class="ticket-card" onclick="abrirDetalle('Campo General', 130.000, 'Disponible')" style="cursor: pointer;">
                <div class="ticket-photo-box">
                    <img src="images/campo general.jpg" alt="Campo General" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="ticket-info">
                    <h4>Campo General</h4>
                    <p>Fila Sine</p>
                </div>
                <div class="ticket-price">
                    <span class="price-val" id="precio-general">130.000 AR$</span>
                    <span class="badge-green">Disponible</span>
                </div>
            </div>

            <div class="ticket-card" style="cursor: not-allowed; opacity: 0.7;">
                <div class="ticket-photo-box">
                    <img src="images/belgrano alta.jpg" alt="Belgrano Alta" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="ticket-info">
                    <h4>Belgrano Alta</h4>
                    <p>Fila Sine</p>
                </div>
                <div class="ticket-price">
                    <span class="price-val" style="color: #e74c3c; font-weight: bold;">AGOTADO</span>
                    <span class="badge-green" style="background: #e74c3c;">Agotado</span>
                </div>
            </div>

            <div class="ticket-card" style="cursor: not-allowed; opacity: 0.7;">
                <div class="ticket-photo-box">
                    <img src="images/san martin alta.jpg" alt="San Martin Alta" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="ticket-info">
                    <h4>San Martin Alta</h4>
                    <p>Fila Sine</p>
                </div>
                <div class="ticket-price">
                    <span class="price-val" style="color: #e74c3c; font-weight: bold;">AGOTADO</span>
                    <span class="badge-green" style="background: #e74c3c;">Agotado</span>
                </div>
            </div>
        </div>
    </main>

    <script>
        const preciosBase = {
            'Sivori Alta': 110.050,
            'Campo Delantero': 160.000,
            'Campo General': 130.000
        };

        function obtenerMultiplicador(cantidad) {
            const cantidadNum = parseInt(cantidad) || 1;
            if (cantidadNum === 2) {
                return 1.8178100863244;
            } else if (cantidadNum === 3) {
                return 2.8178100863244;
            }
            return 1;
        }

        function actualizarPrecios() {
            const cantidad = localStorage.getItem('cantidadEntradas') || '1';
            console.log('Cantidad guardada:', cantidad);
            const cantidadNum = parseInt(cantidad);
            const multiplicador = obtenerMultiplicador(cantidad);
            console.log('Multiplicador:', multiplicador);
            
            const cantidadPill = document.getElementById('cantidadPill');
            if (cantidadPill) {
                cantidadPill.textContent = cantidad + ' entrada' + (cantidadNum > 1 ? 's' : '');
                console.log('Cantidad actualizada en pill:', cantidad);
            }
            
            const precio1 = (298.812 * multiplicador).toFixed(3);
            const precio2 = (110.050 * multiplicador).toFixed(3);
            
            if (document.getElementById('bubble1')) {
                document.getElementById('bubble1').textContent = precio1 + ' AR$';
            }
            if (document.getElementById('bubble2')) {
                document.getElementById('bubble2').textContent = precio2 + ' AR$';
            }
            
            if (document.getElementById('precio-sivori')) {
                const precioSivori = (preciosBase['Sivori Alta'] * multiplicador).toFixed(3);
                document.getElementById('precio-sivori').textContent = precioSivori + ' AR$';
                console.log('Precio Sivori:', precioSivori);
            }
            
            if (document.getElementById('precio-delantero')) {
                const precioDelantero = (preciosBase['Campo Delantero'] * multiplicador).toFixed(3);
                document.getElementById('precio-delantero').textContent = precioDelantero + ' AR$';
                console.log('Precio Delantero:', precioDelantero);
            }
            
            if (document.getElementById('precio-general')) {
                const precioGeneral = (preciosBase['Campo General'] * multiplicador).toFixed(3);
                document.getElementById('precio-general').textContent = precioGeneral + ' AR$';
                console.log('Precio General:', precioGeneral);
            }
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', actualizarPrecios);
        } else {
            actualizarPrecios();
        }

        window.addEventListener('pageshow', actualizarPrecios);

        function abrirDetalle(nombre, precio, badge) {
            const cantidad = localStorage.getItem('cantidadEntradas') || '1';
            const multiplicador = obtenerMultiplicador(cantidad);
            const precioAjustado = preciosBase[nombre] * multiplicador;
            
            const entradaData = {
                nombre: nombre,
                precio: precioAjustado,
                badge: badge,
                precioBase: preciosBase[nombre],
                cantidad: cantidad
            };
            console.log('Datos enviados a detalle:', entradaData);
            localStorage.setItem('entradaSeleccionada', JSON.stringify(entradaData));
            window.location.href = 'detalle.html';
        }
    </script>
</body>
</html>



